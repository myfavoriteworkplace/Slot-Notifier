npm run start

> rest-express@1.0.0 start
> NODE_ENV=production node dist/index.cjs

/Users/aruntharakan/Documents/Coding Practices/BOOK MY SLOT/BOOK-MY-SLOT/17-JAN-2025/Slot-Notifier/dist/index.cjs:70
`);Lo.write(i6.format.apply(i6,t))}}Object.defineProperty(Kr.exports,"isWin",{get:function(){return ql},set:function(e){ql=e}});Kr.exports.warnTo=function(e){var t=Lo;return Lo=e,t};Kr.exports.getFileName=function(e){var t=e||process.env,r=t.PGPASSFILE||(ql?r6.join(t.APPDATA||"./","postgresql","pgpass.conf"):r6.join(t.HOME||"./",".pgpass"));return r};Kr.exports.usePgPass=function(e,t){return Object.prototype.hasOwnProperty.call(process.env,"PGPASSWORD")?!1:ql?!0:(t=t||"<unkn>",HV(e.mode)?e.mode&(JV|$V)?(Gy('WARNING: password file "%s" has group or world access; permissions should be u=rw (0600) or less',t),!1):!0:(Gy('WARNING: password file "%s" is not a plain file',t),!1))};var VV=Kr.exports.match=function(e,t){return La.slice(0,-1).reduce(function(r,i,n){return n==1&&Number(e[i]||LV)===Number(t[i])?r&&!0:r&&(t[i]==="*"||t[i]===e[i])},!0)};Kr.exports.getPassword=function(e,t,r){var i,n=t.pipe(BV());function a(c){var u=GV(c);u&&KV(u)&&VV(e,u)&&(i=u[QV],n.end())}var s=function(){t.destroy(),r(i)},o=function(c){t.destroy(),Gy("WARNING: error on reading file: %s",c),r(void 0)};t.on("error",o),n.on("data",a).on("end",s).on("error",o)};var GV=Kr.exports.parseLine=function(e){if(e.length<11||e.match(/^\s+#/))return null;for(var t="",r="",i=0,n=0,a=0,s={},o=!1,c=function(l,p,d){var g=e.substring(p,d);Object.hasOwnProperty.call(process.env,"PGPASS_NO_DEESCAPE")||(g=g.replace(/\\([:\\])/g,"$1")),s[La[l]]=g},u=0;u<e.length-1;u+=1){if(t=e.charAt(u+1),r=e.charAt(u),o=i==Vy-1,o){c(i,n);break}u>=0&&t==":"&&r!=="\\"&&(c(i,n,u+1),n=u+2,i+=1)}return s=Object.keys(s).length===Vy?s:null,s},KV=Kr.exports.isValidEntry=function(e){for(var t={0:function(s){return s.length>0},1:function(s){return s==="*"?!0:(s=Number(s),isFinite(s)&&s>0&&s<9007199254740992&&Math.floor(s)===s)},2:function(s){return s.length>0},3:function(s){return s.length>0},4:function(s){return s.length>0}},r=0;r<La.length;r+=1){var i=t[r],n=e[La[r]]||"",a=i(n);if(!a)return!1}return!0}});var s6=f((nde,Ky)=>{"use strict";var ide=require("path"),a6=require("fs"),Il=n6();Ky.exports=function(e,t){var r=Il.getFileName();a6.stat(r,function(i,n){if(i||!Il.usePgPass(n,r))return t(void 0);var a=a6.createReadStream(r);Il.getPassword(e,a,t)})};Ky.exports.warnTo=Il.warnTo});var l6=f((ade,u6)=>{"use strict";var WV=require("events").EventEmitter,o6=Na(),Wy=CT(),ZV=Ol(),XV=xy(),c6=LT(),YV=Do(),eG=Qy(),tG=hy(),jl=class extends WV{constructor(t){super(),this.connectionParameters=new XV(t),this.user=this.connectionParameters.user,this.database=this.connectionParameters.database,this.port=this.connectionParameters.port,this.host=this.connectionParameters.host,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:this.connectionParameters.password}),this.replication=this.connectionParameters.replication;let r=t||{};this._Promise=r.Promise||global.Promise,this._types=new ZV(r.types),this._ending=!1,this._ended=!1,this._connecting=!1,this._connected=!1,this._connectionError=!1,this._queryable=!0,this.enableChannelBinding=!!r.enableChannelBinding,this.connection=r.connection||new eG({stream:r.stream,ssl:this.connectionParameters.ssl,keepAlive:r.keepAlive||!1,keepAliveInitialDelayMillis:r.keepAliveInitialDelayMillis||0,encoding:this.connectionParameters.client_encoding||"utf8"}),this.queryQueue=[],this.binary=r.binary||YV.binary,this.processID=null,this.secretKey=null,this.ssl=this.connectionParameters.ssl||!1,this.ssl&&this.ssl.key&&Object.defineProperty(this.ssl,"key",{enumerable:!1}),this._connectionTimeoutMillis=r.connectionTimeoutMillis||0}_errorAllQueries(t){let r=i=>{process.nextTick(()=>{i.handleError(t,this.connection)})};this.activeQuery&&(r(this.activeQuery),this.activeQuery=null),this.queryQueue.forEach(r),this.queryQueue.length=0}_connect(t){let r=this,i=this.connection;if(this._connectionCallback=t,this._connecting||this._connected){let n=new Error("Client has already been connected. You cannot reuse a client.");process.nextTick(()=>{t(n)});return}this._connecting=!0,this._connectionTimeoutMillis>0&&(this.connectionTimeoutHandle=setTimeout(()=>{i._ending=!0,i.stream.destroy(new Error("timeout expired"))},this._connectionTimeoutMillis),this.connectionTimeoutHandle.unref&&this.connectionTimeoutHandle.unref()),this.host&&this.host.indexOf("/")===0?i.connect(this.host+"/.s.PGSQL."+this.port):i.connect(this.port,this.host),i.on("connect",function(){r.ssl?i.requestSsl():i.startup(r.getStartupConf())}),i.on("sslconnect",function(){i.startup(r.getStartupConf())}),this._attachListeners(i),i.once("end",()=>{let n=this._ending?new Error("Connection terminated"):new Error("Connection terminated unexpectedly");clearTimeout(this.connectionTimeoutHandle),this._errorAllQueries(n),this._ended=!0,this._ending||(this._connecting&&!this._connectionError?this._connectionCallback?this._connectionCallback(n):this._handleErrorEvent(n):this._connectionError||this._handleErrorEvent(n)),process.nextTick(()=>{this.emit("end")})})}connect(t){if(t){this._connect(t);return}return new this._Promise((r,i)=>{this._connect(n=>{n?i(n):r()})})}_attachListeners(t){t.on("authenticationCleartextPassword",this._handleAuthCleartextPassword.bind(this)),t.on("authenticationMD5Password",this._handleAuthMD5Password.bind(this)),t.on("authenticationSASL",this._handleAuthSASL.bind(this)),t.on("authenticationSASLContinue",this._handleAuthSASLContinue.bind(this)),t.on("authenticationSASLFinal",this._handleAuthSASLFinal.bind(this)),t.on("backendKeyData",this._handleBackendKeyData.bind(this)),t.on("error",this._handleErrorEvent.bind(this)),t.on("errorMessage",this._handleErrorMessage.bind(this)),t.on("readyForQuery",this._handleReadyForQuery.bind(this)),t.on("notice",this._handleNotice.bind(this)),t.on("rowDescription",this._handleRowDescription.bind(this)),t.on("dataRow",this._handleDataRow.bind(this)),t.on("portalSuspended",this._handlePortalSuspended.bind(this)),t.on("emptyQuery",this._handleEmptyQuery.bind(this)),t.on("commandComplete",this._handleCommandComplete.bind(this)),t.on("parseComplete",this._handleParseComplete.bind(this)),t.on("copyInResponse",this._handleCopyInResponse.bind(this)),t.on("copyData",this._handleCopyData.bind(this)),t.on("notification",this._handleNotification.bind(this))}_checkPgPass(t){let r=this.connection;if(typeof this.password=="function")this._Promise.resolve().then(()=>this.password()).then(i=>{if(i!==void 0){if(typeof i!="string"){r.emit("error",new TypeError("Password must be a string"));return}this.connectionParameters.password=this.password=i}else this.connectionParameters.password=this.password=null;t()}).catch(i=>{r.emit("error",i)});else if(this.password!==null)t();else try{s6()(this.connectionParameters,n=>{n!==void 0&&(this.connectionParameters.password=this.password=n),t()})}catch(i){this.emit("error",i)}}_handleAuthCleartextPassword(t){this._checkPgPass(()=>{this.connection.password(this.password)})}_handleAuthMD5Password(t){this._checkPgPass(async()=>{try{let r=await tG.postgresMd5PasswordHash(this.user,this.password,t.salt);this.connection.password(r)}catch(r){this.emit("error",r)}})}_handleAuthSASL(t){this._checkPgPass(()=>{try{this.saslSession=Wy.startSession(t.mechanisms,this.enableChannelBinding&&this.connection.stream),this.connection.sendSASLInitialResponseMessage(this.saslSession.mechanism,this.saslSession.response)}catch(r){this.connection.emit("error",r)}})}async _handleAuthSASLContinue(t){try{await Wy.continueSession(this.saslSession,this.password,t.data,this.enableChannelBinding&&this.connection.stream),this.connection.sendSCRAMClientFinalMessage(this.saslSession.response)}catch(r){this.connection.emit("error",r)}}_handleAuthSASLFinal(t){try{Wy.finalizeSession(this.saslSession,t.data),this.saslSession=null}catch(r){this.connection.emit("error",r)}}_handleBackendKeyData(t){this.processID=t.processID,this.secretKey=t.secretKey}_handleReadyForQuery(t){this._connecting&&(this._connecting=!1,this._connected=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback&&(this._connectionCallback(null,this),this._connectionCallback=null),this.emit("connect"));let{activeQuery:r}=this;this.activeQuery=null,this.readyForQuery=!0,r&&r.handleReadyForQuery(this.connection),this._pulseQueryQueue()}_handleErrorWhileConnecting(t){if(!this._connectionError){if(this._connectionError=!0,clearTimeout(this.connectionTimeoutHandle),this._connectionCallback)return this._connectionCallback(t);this.emit("error",t)}}_handleErrorEvent(t){if(this._connecting)return this._handleErrorWhileConnecting(t);this._queryable=!1,this._errorAllQueries(t),this.emit("error",t)}_handleErrorMessage(t){if(this._connecting)return this._handleErrorWhileConnecting(t);let r=this.activeQuery;if(!r){this._handleErrorEvent(t);return}this.activeQuery=null,r.handleError(t,this.connection)}_handleRowDescription(t){this.activeQuery.handleRowDescription(t)}_handleDataRow(t){this.activeQuery.handleDataRow(t)}_handlePortalSuspended(t){this.activeQuery.handlePortalSuspended(this.connection)}_handleEmptyQuery(t){this.activeQuery.handleEmptyQuery(this.connection)}_handleCommandComplete(t){if(this.activeQuery==null){let r=new Error("Received unexpected commandComplete message from backend.");this._handleErrorEvent(r);return}this.activeQuery.handleCommandComplete(t,this.connection)}_handleParseComplete(){if(this.activeQuery==null){let t=new Error("Received unexpected parseComplete message from backend.");this._handleErrorEvent(t);return}this.activeQuery.name&&(this.connection.parsedStatements[this.activeQuery.name]=this.activeQuery.text)}_handleCopyInResponse(t){this.activeQuery.handleCopyInResponse(this.connection)}_handleCopyData(t){this.activeQuery.handleCopyData(t,this.connection)}_handleNotification(t){this.emit("notification",t)}_handleNotice(t){this.emit("notice",t)}getStartupConf(){let t=this.connectionParameters,r={user:t.user,database:t.database},i=t.application_name||t.fallback_application_name;return i&&(r.application_name=i),t.replication&&(r.replication=""+t.replication),t.statement_timeout&&(r.statement_timeout=String(parseInt(t.statement_timeout,10))),t.lock_timeout&&(r.lock_timeout=String(parseInt(t.lock_timeout,10))),t.idle_in_transaction_session_timeout&&(r.idle_in_transaction_session_timeout=String(parseInt(t.idle_in_transaction_session_timeout,10))),t.options&&(r.options=t.options),r}cancel(t,r){if(t.activeQuery===r){let i=this.connection;this.host&&this.host.indexOf("/")===0?i.connect(this.host+"/.s.PGSQL."+this.port):i.connect(this.port,this.host),i.on("connect",function(){i.cancel(t.processID,t.secretKey)})}else t.queryQueue.indexOf(r)!==-1&&t.queryQueue.splice(t.queryQueue.indexOf(r),1)}setTypeParser(t,r,i){return this._types.setTypeParser(t,r,i)}getTypeParser(t,r){return this._types.getTypeParser(t,r)}escapeIdentifier(t){return o6.escapeIdentifier(t)}escapeLiteral(t){return o6.escapeLiteral(t)}_pulseQueryQueue(){if(this.readyForQuery===!0)if(this.activeQuery=this.queryQueue.shift(),this.activeQuery){this.readyForQuery=!1,this.hasExecuted=!0;let t=this.activeQuery.submit(this.connection);t&&process.nextTick(()=>{this.activeQuery.handleError(t,this.connection),this.readyForQuery=!0,this._pulseQueryQueue()})}else this.hasExecuted&&(this.activeQuery=null,this.emit("drain"))}query(t,r,i){let n,a,s,o,c;if(t==null)throw new TypeError("Client was passed a null or undefined query");return typeof t.submit=="function"?(s=t.query_timeout||this.connectionParameters.query_timeout,a=n=t,typeof r=="function"&&(n.callback=n.callback||r)):(s=t.query_timeout||this.connectionParameters.query_timeout,n=new c6(t,r,i),n.callback||(a=new this._Promise((u,l)=>{n.callback=(p,d)=>p?l(p):u(d)}).catch(u=>{throw Error.captureStackTrace(u),u}))),s&&(c=n.callback,o=setTimeout(()=>{let u=new Error("Query read timeout");process.nextTick(()=>{n.handleError(u,this.connection)}),c(u),n.callback=()=>{};let l=this.queryQueue.indexOf(n);l>-1&&this.queryQueue.splice(l,1),this._pulseQueryQueue()},s),n.callback=(u,l)=>{clearTimeout(o),c(u,l)}),this.binary&&!n.binary&&(n.binary=!0),n._result&&!n._result._types&&(n._result._types=this._types),this._queryable?this._ending?(process.nextTick(()=>{n.handleError(new Error("Client was closed and is not queryable"),this.connection)}),a):(this.queryQueue.push(n),this._pulseQueryQueue(),a):(process.nextTick(()=>{n.handleError(new Error("Client has encountered a connection error and is not queryable"),this.connection)}),a)}ref(){this.connection.ref()}unref(){this.connection.unref()}end(t){if(this._ending=!0,!this.connection._connecting||this._ended)if(t)t();else return this._Promise.resolve();if(this.activeQuery||!this._queryable?this.connection.stream.destroy():this.connection.end(),t)this.connection.once("end",t);else return new this._Promise(r=>{this.connection.once("end",r)})}};jl.Query=c6;u6.exports=jl});var m6=f((sde,f6)=>{"use strict";var rG=require("events").EventEmitter,p6=function(){},d6=(e,t)=>{let r=e.findIndex(t);return r===-1?void 0:e.splice(r,1)[0]},Zy=class{constructor(t,r,i){this.client=t,this.idleListener=r,this.timeoutId=i}},Ja=class{constructor(t){this.callback=t}};function iG(){throw new Error("Release called on client which has already been released to the pool.")}function zl(e,t){if(t)return{callback:t,result:void 0};let r,i,n=function(s,o){s?r(s):i(o)},a=new e(function(s,o){i=s,r=o}).catch(s=>{throw Error.captureStackTrace(s),s});return{callback:n,result:a}}function nG(e,t){return function r(i){i.client=t,t.removeListener("error",r),t.on("error",()=>{e.log("additional client error after disconnection due to error",i)}),e._remove(t),e.emit("error",i,t)}}var Xy=class extends rG{constructor(t,r){super(),this.options=Object.assign({},t),t!=null&&"password"in t&&Object.defineProperty(this.options,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),t!=null&&t.ssl&&t.ssl.key&&Object.defineProperty(this.options.ssl,"key",{enumerable:!1}),this.options.max=this.options.max||this.options.poolSize||10,this.options.min=this.options.min||0,this.options.maxUses=this.options.maxUses||1/0,this.options.allowExitOnIdle=this.options.allowExitOnIdle||!1,this.options.maxLifetimeSeconds=this.options.maxLifetimeSeconds||0,this.log=this.options.log||function(){},this.Client=this.options.Client||r||Nl().Client,this.Promise=this.options.Promise||global.Promise,typeof this.options.idleTimeoutMillis>"u"&&(this.options.idleTimeoutMillis=1e4),this._clients=[],this._idle=[],this._expired=new WeakSet,this._pendingQueue=[],this._endCallback=void 0,this.ending=!1,this.ended=!1}_isFull(){return this._clients.length>=this.options.max}_isAboveMin(){return this._clients.length>this.options.min}_pulseQueue(){if(this.log("pulse queue"),this.ended){this.log("pulse queue ended");return}if(this.ending){this.log("pulse queue on ending"),this._idle.length&&this._idle.slice().map(r=>{this._remove(r.client)}),this._clients.length||(this.ended=!0,this._endCallback());return}if(!this._pendingQueue.length){this.log("no queued requests");return}if(!this._idle.length&&this._isFull())return;let t=this._pendingQueue.shift();if(this._idle.length){let r=this._idle.pop();clearTimeout(r.timeoutId);let i=r.client;i.ref&&i.ref();let n=r.idleListener;return this._acquireClient(i,t,n,!1)}if(!this._isFull())return this.newClient(t);throw new Error("unexpected condition")}_remove(t,r){let i=d6(this._idle,a=>a.client===t);i!==void 0&&clearTimeout(i.timeoutId),this._clients=this._clients.filter(a=>a!==t);let n=this;t.end(()=>{n.emit("remove",t),typeof r=="function"&&r()})}connect(t){if(this.ending){let n=new Error("Cannot use a pool after calling end on the pool");return t?t(n):this.Promise.reject(n)}let r=zl(this.Promise,t),i=r.result;if(this._isFull()||this._idle.length){if(this._idle.length&&process.nextTick(()=>this._pulseQueue()),!this.options.connectionTimeoutMillis)return this._pendingQueue.push(new Ja(r.callback)),i;let n=(o,c,u)=>{clearTimeout(s),r.callback(o,c,u)},a=new Ja(n),s=setTimeout(()=>{d6(this._pendingQueue,o=>o.callback===n),a.timedOut=!0,r.callback(new Error("timeout exceeded when trying to connect"))},this.options.connectionTimeoutMillis);return s.unref&&s.unref(),this._pendingQueue.push(a),i}return this.newClient(new Ja(r.callback)),i}newClient(t){let r=new this.Client(this.options);this._clients.push(r);let i=nG(this,r);this.log("checking client timeout");let n,a=!1;this.options.connectionTimeoutMillis&&(n=setTimeout(()=>{this.log("ending client due to timeout"),a=!0,r.connection?r.connection.stream.destroy():r.end()},this.options.connectionTimeoutMillis)),this.log("connecting new client"),r.connect(s=>{if(n&&clearTimeout(n),r.on("error",i),s)this.log("client failed to connect",s),this._clients=this._clients.filter(o=>o!==r),a&&(s=new Error("Connection terminated due to connection timeout",{cause:s})),this._pulseQueue(),t.timedOut||t.callback(s,void 0,p6);else{if(this.log("new client connected"),this.options.maxLifetimeSeconds!==0){let o=setTimeout(()=>{this.log("ending client due to expired lifetime"),this._expired.add(r),this._idle.findIndex(u=>u.client===r)!==-1&&this._acquireClient(r,new Ja((u,l,p)=>p()),i,!1)},this.options.maxLifetimeSeconds*1e3);o.unref(),r.once("end",()=>clearTimeout(o))}return this._acquireClient(r,t,i,!0)}})}_acquireClient(t,r,i,n){n&&this.emit("connect",t),this.emit("acquire",t),t.release=this._releaseOnce(t,i),t.removeListener("error",i),r.timedOut?n&&this.options.verify?this.options.verify(t,t.release):t.release():n&&this.options.verify?this.options.verify(t,a=>{if(a)return t.release(a),r.callback(a,void 0,p6);r.callback(void 0,t,t.release)}):r.callback(void 0,t,t.release)}_releaseOnce(t,r){let i=!1;return n=>{i&&iG(),i=!0,this._release(t,r,n)}}_release(t,r,i){if(t.on("error",r),t._poolUseCount=(t._poolUseCount||0)+1,this.emit("release",i,t),i||this.ending||!t._queryable||t._ending||t._poolUseCount>=this.options.maxUses)return t._poolUseCount>=this.options.maxUses&&this.log("remove expended client"),this._remove(t,this._pulseQueue.bind(this));if(this._expired.has(t))return this.log("remove expired client"),this._expired.delete(t),this._remove(t,this._pulseQueue.bind(this));let a;this.options.idleTimeoutMillis&&this._isAboveMin()&&(a=setTimeout(()=>{this.log("remove idle client"),this._remove(t,this._pulseQueue.bind(this))},this.options.idleTimeoutMillis),this.options.allowExitOnIdle&&a.unref()),this.options.allowExitOnIdle&&t.unref(),this._idle.push(new Zy(t,r,a)),this._pulseQueue()}query(t,r,i){if(typeof t=="function"){let a=zl(this.Promise,t);return setImmediate(function(){return a.callback(new Error("Passing a function as the first parameter to pool.query is not supported"))}),a.result}typeof r=="function"&&(i=r,r=void 0);let n=zl(this.Promise,i);return i=n.callback,this.connect((a,s)=>{if(a)return i(a);let o=!1,c=u=>{o||(o=!0,s.release(u),i(u))};s.once("error",c),this.log("dispatching query");try{s.query(t,r,(u,l)=>{if(this.log("query dispatched"),s.removeListener("error",c),!o)return o=!0,s.release(u),u?i(u):i(void 0,l)})}catch(u){return s.release(u),i(u)}}),n.result}end(t){if(this.log("ending"),this.ending){let i=new Error("Called end on pool more than once");return t?t(i):this.Promise.reject(i)}this.ending=!0;let r=zl(this.Promise,t);return this._endCallback=r.callback,this._pulseQueue(),r.result}get waitingCount(){return this._pendingQueue.length}get idleCount(){return this._idle.length}get expiredCount(){return this._clients.reduce((t,r)=>t+(this._expired.has(r)?1:0),0)}get totalCount(){return this._clients.length}};f6.exports=Xy});var v6=f((ode,g6)=>{"use strict";var h6=require("events").EventEmitter,aG=require("util"),Yy=Na(),$a=g6.exports=function(e,t,r){h6.call(this),e=Yy.normalizeQueryConfig(e,t,r),this.text=e.text,this.values=e.values,this.name=e.name,this.queryMode=e.queryMode,this.callback=e.callback,this.state="new",this._arrayMode=e.rowMode==="array",this._emitRowEvents=!1,this.on("newListener",function(i){i==="row"&&(this._emitRowEvents=!0)}.bind(this))};aG.inherits($a,h6);var sG={sqlState:"code",statementPosition:"position",messagePrimary:"message",context:"where",schemaName:"schema",tableName:"table",columnName:"column",dataTypeName:"dataType",constraintName:"constraint",sourceFile:"file",sourceLine:"line",sourceFunction:"routine"};$a.prototype.handleError=function(e){let t=this.native.pq.resultErrorFields();if(t)for(let r in t){let i=sG[r]||r;e[i]=t[r]}this.callback?this.callback(e):this.emit("error",e),this.state="error"};$a.prototype.then=function(e,t){return this._getPromise().then(e,t)};$a.prototype.catch=function(e){return this._getPromise().catch(e)};$a.prototype._getPromise=function(){return this._promise?this._promise:(this._promise=new Promise(function(e,t){this._once("end",e),this._once("error",t)}.bind(this)),this._promise)};$a.prototype.submit=function(e){this.state="running";let t=this;this.native=e.native,e.native.arrayMode=this._arrayMode;let r=function(i,n,a){if(e.native.arrayMode=!1,setImmediate(function(){t.emit("_done")}),i)return t.handleError(i);t._emitRowEvents&&(a.length>1?n.forEach((s,o)=>{s.forEach(c=>{t.emit("row",c,a[o])})}):n.forEach(function(s){t.emit("row",s,a)})),t.state="end",t.emit("end",a),t.callback&&t.callback(null,a)};if(process.domain&&(r=process.domain.bind(r)),this.name){this.name.length>63&&(console.error("Warning! Postgres only supports 63 characters for query names."),console.error("You supplied %s (%s)",this.name,this.name.length),console.error("This can cause conflicts and silent errors executing queries"));let i=(this.values||[]).map(Yy.prepareValue);if(e.namedQueries[this.name]){if(this.text&&e.namedQueries[this.name]!==this.text){let n=new Error(`Prepared statements must be unique - '${this.name}' was used for a different statement`);return r(n)}return e.native.execute(this.name,i,r)}return e.native.prepare(this.name,this.text,i.length,function(n){return n?r(n):(e.namedQueries[t.name]=t.text,t.native.execute(t.name,i,r))})}else if(this.values){if(!Array.isArray(this.values)){let n=new Error("Query values must be an array");return r(n)}let i=this.values.map(Yy.prepareValue);e.native.query(this.text,i,r)}else this.queryMode==="extended"?e.native.query(this.text,[],r):e.native.query(this.text,r)}});var _6=f((cde,w6)=>{"use strict";var x6;try{x6=require("pg-native")}catch(e){throw e}var oG=Ol(),y6=require("events").EventEmitter,cG=require("util"),uG=xy(),b6=v6(),It=w6.exports=function(e){y6.call(this),e=e||{},this._Promise=e.Promise||global.Promise,this._types=new oG(e.types),this.native=new x6({types:this._types}),this._queryQueue=[],this._ending=!1,this._connecting=!1,this._connected=!1,this._queryable=!0;let t=this.connectionParameters=new uG(e);e.nativeConnectionString&&(t.nativeConnectionString=e.nativeConnectionString),this.user=t.user,Object.defineProperty(this,"password",{configurable:!0,enumerable:!1,writable:!0,value:t.password}),this.database=t.database,this.host=t.host,this.port=t.port,this.namedQueries={}};It.Query=b6;cG.inherits(It,y6);It.prototype._errorAllQueries=function(e){let t=r=>{process.nextTick(()=>{r.native=this.native,r.handleError(e)})};this._hasActiveQuery()&&(t(this._activeQuery),this._activeQuery=null),this._queryQueue.forEach(t),this._queryQueue.length=0};It.prototype._connect=function(e){let t=this;if(this._connecting){process.nextTick(()=>e(new Error("Client has already been connected. You cannot reuse a client.")));return}this._connecting=!0,this.connectionParameters.getLibpqConnectionString(function(r,i){if(t.connectionParameters.nativeConnectionString&&(i=t.connectionParameters.nativeConnectionString),r)return e(r);t.native.connect(i,function(n){if(n)return t.native.end(),e(n);t._connected=!0,t.native.on("error",function(a){t._queryable=!1,t._errorAllQueries(a),t.emit("error",a)}),t.native.on("notification",function(a){t.emit("notification",{channel:a.relname,payload:a.extra})}),t.emit("connect"),t._pulseQueryQueue(!0),e()})})};It.prototype.connect=function(e){if(e){this._connect(e);return}return new this._Promise((t,r)=>{this._connect(i=>{i?r(i):t()})})};It.prototype.query=function(e,t,r){let i,n,a,s,o;if(e==null)throw new TypeError("Client was passed a null or undefined query");if(typeof e.submit=="function")a=e.query_timeout||this.connectionParameters.query_timeout,n=i=e,typeof t=="function"&&(e.callback=t);else if(a=e.query_timeout||this.connectionParameters.query_timeout,i=new b6(e,t,r),!i.callback){let c,u;n=new this._Promise((l,p)=>{c=l,u=p}).catch(l=>{throw Error.captureStackTrace(l),l}),i.callback=(l,p)=>l?u(l):c(p)}return a&&(o=i.callback,s=setTimeout(()=>{let c=new Error("Query read timeout");process.nextTick(()=>{i.handleError(c,this.connection)}),o(c),i.callback=()=>{};let u=this._queryQueue.indexOf(i);u>-1&&this._queryQueue.splice(u,1),this._pulseQueryQueue()},a),i.callback=(c,u)=>{clearTimeout(s),o(c,u)}),this._queryable?this._ending?(i.native=this.native,process.nextTick(()=>{i.handleError(new Error("Client was closed and is not queryable"))}),n):(this._queryQueue.push(i),this._pulseQueryQueue(),n):(i.native=this.native,process.nextTick(()=>{i.handleError(new Error("Client has encountered a connection error and is not queryable"))}),n)};It.prototype.end=function(e){let t=this;this._ending=!0,this._connected||this.once("connect",this.end.bind(this,e));let r;return e||(r=new this._Promise(function(i,n){e=a=>a?n(a):i()})),this.native.end(function(){t._errorAllQueries(new Error("Connection terminated")),process.nextTick(()=>{t.emit("end"),e&&e()})}),r};It.prototype._hasActiveQuery=function(){return this._activeQuery&&this._activeQuery.state!=="error"&&this._activeQuery.state!=="end"};It.prototype._pulseQueryQueue=function(e){if(!this._connected||this._hasActiveQuery())return;let t=this._queryQueue.shift();if(!t){e||this.emit("drain");return}this._activeQuery=t,t.submit(this);let r=this;t.once("_done",function(){r._pulseQueryQueue()})};It.prototype.cancel=function(e){this._activeQuery===e?this.native.cancel(function(){}):this._queryQueue.indexOf(e)!==-1&&this._queryQueue.splice(this._queryQueue.indexOf(e),1)};It.prototype.ref=function(){};It.prototype.unref=function(){};It.prototype.setTypeParser=function(e,t,r){return this._types.setTypeParser(e,t,r)};It.prototype.getTypeParser=function(e,t){return this._types.getTypeParser(e,t)}});var eb=f((ude,S6)=>{"use strict";S6.exports=_6()});var Nl=f((pde,Jo)=>{"use strict";var lG=l6(),pG=Do(),dG=Qy(),fG=by(),mG=Na(),hG=m6(),gG=Ol(),{DatabaseError:vG}=Fy(),{escapeIdentifier:xG,escapeLiteral:yG}=Na(),bG=e=>class extends hG{constructor(r){super(r,e)}},tb=function(e){this.defaults=pG,this.Client=e,this.Query=this.Client.Query,this.Pool=bG(this.Client),this._pools=[],this.Connection=dG,this.types=Ro(),this.DatabaseError=vG,this.TypeOverrides=gG,this.escapeIdentifier=xG,this.escapeLiteral=yG,this.Result=fG,this.utils=mG};typeof process.env.NODE_PG_FORCE_NATIVE<"u"?Jo.exports=new tb(eb()):(Jo.exports=new tb(lG),Object.defineProperty(Jo.exports,"native",{configurable:!0,enumerable:!1,get(){let e=null;try{e=new tb(eb())}catch(t){if(t.code!=="MODULE_NOT_FOUND")throw t}return Object.defineProperty(Jo.exports,"native",{value:e}),e}}))});var Ut,dde,fde,mde,hde,gde,vde,xde,yde,bde,wde,_de,xi,Ml=_(()=>{Ut=Ge(Nl(),1),dde=Ut.default.Client,fde=Ut.default.Pool,mde=Ut.default.Connection,hde=Ut.default.types,gde=Ut.default.Query,vde=Ut.default.DatabaseError,xde=Ut.default.escapeIdentifier,yde=Ut.default.escapeLiteral,bde=Ut.default.Result,wde=Ut.default.TypeOverrides,_de=Ut.default.defaults,xi=Ut.default});var O6,jr,rb,Rl,ib,nb=_(()=>{Ml();A();pl();cl();Ux();Be();Rr();fe();({Pool:O6,types:jr}=xi),rb=class extends al{constructor(t,r,i,n,a,s,o,c){super({sql:r,params:i}),this.client=t,this.params=i,this.logger=n,this.fields=a,this._isResponseInArrayMode=o,this.customResultMapper=c,this.rawQueryConfig={name:s,text:r,types:{getTypeParser:(u,l)=>u===jr.builtins.TIMESTAMPTZ?p=>p:u===jr.builtins.TIMESTAMP?p=>p:u===jr.builtins.DATE?p=>p:u===jr.builtins.INTERVAL?p=>p:jr.getTypeParser(u,l)}},this.queryConfig={name:s,text:r,rowMode:"array",types:{getTypeParser:(u,l)=>u===jr.builtins.TIMESTAMPTZ?p=>p:u===jr.builtins.TIMESTAMP?p=>p:u===jr.builtins.DATE?p=>p:u===jr.builtins.INTERVAL?p=>p:jr.getTypeParser(u,l)}}}static[v]="NodePgPreparedQuery";rawQueryConfig;queryConfig;async execute(t={}){return xe.startActiveSpan("drizzle.execute",async()=>{let r=Cv(this.params,t);this.logger.logQuery(this.rawQueryConfig.text,r);let{fields:i,rawQueryConfig:n,client:a,queryConfig:s,joinsNotNullableMap:o,customResultMapper:c}=this;if(!i&&!c)return xe.startActiveSpan("drizzle.driver.execute",async l=>(l?.setAttributes({"drizzle.query.name":n.name,"drizzle.query.text":n.text,"drizzle.query.params":JSON.stringify(r)}),a.query(n,r)));let u=await xe.startActiveSpan("drizzle.driver.execute",l=>(l?.setAttributes({"drizzle.query.name":s.name,"drizzle.query.text":s.text,"drizzle.query.params":JSON.stringify(r)}),a.query(s,r)));return xe.startActiveSpan("drizzle.mapResponse",()=>c?c(u.rows):u.rows.map(l=>B2(i,l,o)))})}all(t={}){return xe.startActiveSpan("drizzle.execute",()=>{let r=Cv(this.params,t);return this.logger.logQuery(this.rawQueryConfig.text,r),xe.startActiveSpan("drizzle.driver.execute",i=>(i?.setAttributes({"drizzle.query.name":this.rawQueryConfig.name,"drizzle.query.text":this.rawQueryConfig.text,"drizzle.query.params":JSON.stringify(r)}),this.client.query(this.rawQueryConfig,r).then(n=>n.rows)))})}isResponseInArrayMode(){return this._isResponseInArrayMode}},Rl=class e extends sl{constructor(t,r,i,n={}){super(r),this.client=t,this.schema=i,this.options=n,this.logger=n.logger??new ll}static[v]="NodePgSession";logger;prepareQuery(t,r,i,n,a){return new rb(this.client,t.sql,t.params,this.logger,r,i,n,a)}async transaction(t,r){let i=this.client instanceof O6?new e(await this.client.connect(),this.dialect,this.schema,this.options):this,n=new ib(this.dialect,i,this.schema);await n.execute(x`begin${r?x` ${n.getTransactionConfigSQL(r)}`:void 0}`);try{let a=await t(n);return await n.execute(x`commit`),a}catch(a){throw await n.execute(x`rollback`),a}finally{this.client instanceof O6&&i.client.release()}}async count(t){let r=await this.execute(t);return Number(r.rows[0].count)}},ib=class e extends ol{static[v]="NodePgTransaction";async transaction(t){let r=`sp${this.nestedIndex+1}`,i=new e(this.dialect,this.session,this.schema,this.nestedIndex+1);await i.execute(x.raw(`savepoint ${r}`));try{let n=await t(i);return await i.execute(x.raw(`release savepoint ${r}`)),n}catch(n){throw await i.execute(x.raw(`rollback to savepoint ${r}`)),n}}}});function $o(e,t={}){let r=new pi({casing:t.casing}),i;t.logger===!0?i=new ul:t.logger!==!1&&(i=t.logger);let n;if(t.schema){let c=FE(t.schema,HE);n={fullSchema:t.schema,schema:c.tables,tableNamesMap:c.tableNamesMap}}let s=new ab(e,r,{logger:i}).createSession(n),o=new sb(r,s,n);return o.$client=e,o}function Dl(...e){if(typeof e[0]=="string"){let t=new xi.Pool({connectionString:e[0]});return $o(t,e[1])}if($2(e[0])){let{connection:t,client:r,...i}=e[0];if(r)return $o(r,i);let n=typeof t=="string"?new xi.Pool({connectionString:t}):new xi.Pool(t);return $o(n,i)}return $o(e[0],e[1])}var ab,sb,k6=_(()=>{Ml();A();pl();rl();Qu();bo();fe();nb();ab=class{constructor(t,r,i={}){this.client=t,this.dialect=r,this.options=i}static[v]="NodePgDriver";createSession(t){return new Rl(this.client,this.dialect,t,{logger:this.options.logger})}},sb=class extends Sa{static[v]="NodePgDatabase"};(e=>{function t(r){return $o({},r)}e.mock=t})(Dl||(Dl={}))});var E6=_(()=>{k6();nb()});var wG,_G,K,Bl=_(()=>{"use strict";E6();Ml();yl();({Pool:wG}=xi);if(!process.env.DATABASE_URL)throw new Error("DATABASE_URL must be set. Did you forget to provision a database?");_G=new wG({connectionString:process.env.DATABASE_URL}),K=Dl(_G,{schema:Yx})});var ob,xn,Fo=_(()=>{"use strict";xl();Bl();Xi();ob=class{async getUser(t){let[r]=await K.select().from(Pe).where(Z(Pe.id,t));return r}async upsertUser(t){if(await this.getUser(t.id)){let o=t.email==="itsmyfavoriteworkplace@gmail.com",[c]=await K.update(Pe).set({email:t.email,firstName:t.firstName,lastName:t.lastName,profileImageUrl:t.profileImageUrl,updatedAt:new Date,...o?{role:"superuser"}:{}}).where(Z(Pe.id,t.id)).returning();return c}let i=t.email==="itsmyfavoriteworkplace@gmail.com",[{userCount:n}]=await K.select({userCount:QE()}).from(Pe),a=n===0,[s]=await K.insert(Pe).values({...t,role:a||i?"superuser":"customer"}).returning();return s}},xn=new ob});var cb,U,ub=_(()=>{"use strict";yl();Bl();Xi();Fo();cb=class{async hasSuperuser(){return(await K.select().from(Pe).where(Z(Pe.role,"superuser")).limit(1)).length>0}async setUserRole(t,r){await K.update(Pe).set({role:r}).where(Z(Pe.id,t))}async createSlot(t){let[r]=await K.insert(F).values(t).returning();return r}async getSlots(t,r){let i=K.select().from(F),n=[];if(t&&n.push(Z(F.ownerId,t)),r){let a=new Date(r);a.setHours(0,0,0,0);let s=new Date(r);s.setHours(23,59,59,999),n.push(fr(Wi(F.startTime,a),Zi(F.startTime,s)))}return n.length>0&&i.where(fr(...n)),await i.orderBy(F.startTime)}async getSlot(t){let[r]=await K.select().from(F).where(Z(F.id,t));return r}async updateSlot(t,r){let[i]=await K.update(F).set(r).where(Z(F.id,t)).returning();return i}async deleteSlot(t){await K.delete(F).where(Z(F.id,t))}async markSlotBooked(t){let[r]=await K.update(F).set({isBooked:!0}).where(Z(F.id,t)).returning();return r}async createBooking(t){let[r]=await K.insert(X).values({slotId:t.slotId,customerId:t.customerId,customerName:t.customerName,customerPhone:t.customerPhone,customerEmail:t.customerEmail}).returning();return await this.updateSlot(r.slotId,{isBooked:!0}),r}async getBookings(t,r){return r==="owner"?(await K.select({booking:X,slot:F}).from(X).innerJoin(F,Z(X.slotId,F.id)).where(Z(F.ownerId,t))).map(n=>({...n.booking,slot:n.slot})):(await K.select({booking:X,slot:F}).from(X).innerJoin(F,Z(X.slotId,F.id)).where(Z(X.customerId,t))).map(n=>({...n.booking,slot:n.slot}))}async getBookingsByClinicId(t){let r=await this.getClinic(t);return(await K.select({booking:X,slot:F}).from(X).innerJoin(F,Z(X.slotId,F.id))).filter(a=>a.slot.clinicId===t||a.slot.clinicId===null&&r&&a.slot.clinicName===r.name).map(a=>({...a.booking,slot:a.slot}))}async getBookingById(t){let[r]=await K.select().from(X).where(Z(X.id,t));return r}async createPublicBooking(t){let[r]=await K.insert(X).values({slotId:t.slotId,customerName:t.customerName,customerPhone:t.customerPhone,customerEmail:t.customerEmail,verificationCode:t.verificationCode||null,verificationStatus:t.verificationStatus||"verified",verificationExpiresAt:t.verificationExpiresAt||null}).returning();return r}async verifyBooking(t){let[r]=await K.update(X).set({verificationStatus:"verified",verificationCode:null,verificationExpiresAt:null}).where(Z(X.id,t)).returning();return r}async deletePendingBooking(t){let r=await this.getBookingById(t);r&&(await K.delete(X).where(Z(X.id,t)),await this.deleteSlot(r.slotId))}async cancelBooking(t){let r=await this.getBookingById(t);r&&(await K.delete(X).where(Z(X.id,t)),await this.deleteSlot(r.slotId))}async updateBookingVerification(t,r,i){let[n]=await K.update(X).set({verificationCode:r,verificationExpiresAt:i}).where(Z(X.id,t)).returning();return n}async countBookingsForClinicTime(t,r,i){let n=new Date(i.getTime()-6e4),a=new Date(i.getTime()+6e4);return(await K.select({booking:X,slot:F}).from(X).innerJoin(F,Z(X.slotId,F.id)).where(fr(Wi(F.startTime,n),Zi(F.startTime,a)))).filter(c=>{let u=c.slot.clinicId===t||c.slot.clinicName===r,l=c.booking.verificationStatus==="verified"||c.booking.verificationStatus==="pending"&&c.booking.verificationExpiresAt&&new Date<c.booking.verificationExpiresAt;return u&&l}).length}async countVerifiedBookingsForClinicTime(t,r,i){let n=new Date(i.getTime()-6e4),a=new Date(i.getTime()+6e4);return(await K.select({booking:X,slot:F}).from(X).innerJoin(F,Z(X.slotId,F.id)).where(fr(Wi(F.startTime,n),Zi(F.startTime,a),Z(F.isCancelled,!1)))).filter(c=>{let u=c.slot.clinicId===t||c.slot.clinicName===r,l=c.booking.verificationStatus==="verified";return u&&l}).length}async getSlotByTime(t,r){let i=new Date(r.getTime()-6e4),n=new Date(r.getTime()+6e4),[a]=await K.select().from(F).where(fr(Z(F.clinicId,t),Wi(F.startTime,i),Zi(F.startTime,n))).limit(1);return a}async createNotification(t){let[r]=await K.insert(hr).values(t).returning();return r}async getNotifications(t){return await K.select().from(hr).where(Z(hr.userId,t)).orderBy(Du(hr.createdAt))}async markNotificationRead(t){let[r]=await K.update(hr).set({read:!0}).where(Z(hr.id,t)).returning();return r}async getUser(t){return xn.getUser(t)}async createClinic(t){let[r]=await K.insert(He).values(t).returning();return r}async getClinics(t=!1){return t?await K.select().from(He).orderBy(He.name):await K.select().from(He).where(Z(He.isArchived,!1)).orderBy(He.name)}async getClinic(t){let[r]=await K.select().from(He).where(Z(He.id,t));return r}async getClinicByUsername(t){let[r]=await K.select().from(He).where(Z(He.username,t));return r}async updateClinic(t,r){let[i]=await K.update(He).set(r).where(Z(He.id,t)).returning();return i}async archiveClinic(t){let[r]=await K.update(He).set({isArchived:!0}).where(Z(He.id,t)).returning();return r}async unarchiveClinic(t){let[r]=await K.update(He).set({isArchived:!1}).where(Z(He.id,t)).returning();return r}},U=new cb});var T6=f((ife,C6)=>{C6.exports=function(e){var t,r,i=[];return e.on("data",t=function(n,a){i.push(["data",n,a])}),e.on("end",r=function(n,a){i.push(["end",n,a])}),{end:function(){e.removeListener("data",t),e.removeListener("end",r)},resume:function(){this.end();for(var n=0,a=i.length;n<a;++n)e.emit.apply(e,i[n])}}}});var q6=f((nfe,A6)=>{function P6(){}P6.prototype.authenticate=function(e,t){throw new Error("Strategy#authenticate must be overridden by subclass")};A6.exports=P6});var pb=f((lb,j6)=>{var I6=q6();lb=j6.exports=I6;lb.Strategy=I6});var fb=f((afe,N6)=>{var SG=T6(),OG=require("util"),z6=pb();function db(e,t){typeof e=="function"&&(t=e,e=void 0),e=e||{},z6.call(this),this.name="session",this._key=e.key||"passport",this._deserializeUser=t}OG.inherits(db,z6);db.prototype.authenticate=function(e,t){if(!e.session)return this.error(new Error("Login sessions require session support. Did you forget to use `express-session` middleware?"));t=t||{};var r=this,i;if(e.session[this._key]&&(i=e.session[this._key].user),i||i===0){var n=t.pauseStream?SG(e):null;this._deserializeUser(i,e,function(a,s){if(a)return r.error(a);if(!s)delete e.session[r._key].user;else{var o=e._userProperty||"user";e[o]=s}r.pass(),n&&n.resume()})}else r.pass()};N6.exports=db});var D6=f((sfe,R6)=>{var M6=ua();function mb(e,t){typeof e=="function"&&(t=e,e=void 0),e=e||{},this._key=e.key||"passport",this._serializeUser=t}mb.prototype.logIn=function(e,t,r,i){if(typeof r=="function"&&(i=r,r={}),r=r||{},!e.session)return i(new Error("Login sessions require session support. Did you forget to use `express-session` middleware?"));var n=this,a=e.session;e.session.regenerate(function(s){if(s)return i(s);n._serializeUser(t,e,function(o,c){if(o)return i(o);r.keepSessionInfo&&M6(e.session,a),e.session[n._key]||(e.session[n._key]={}),e.session[n._key].user=c,e.session.save(function(u){if(u)return i(u);i()})})})};mb.prototype.logOut=function(e,t,r){if(typeof t=="function"&&(r=t,t={}),t=t||{},!e.session)return r(new Error("Login sessions require session support. Did you forget to use `express-session` middleware?"));var i=this;e.session[this._key]&&delete e.session[this._key].user;var n=e.session;e.session.save(function(a){if(a)return r(a);e.session.regenerate(function(s){if(s)return r(s);t.keepSessionInfo&&M6(e.session,n),r()})})};R6.exports=mb});var hb=f((B6,L6)=>{var Fa=B6=L6.exports={};Fa.login=Fa.logIn=function(e,t,r){typeof t=="function"&&(r=t,t={}),t=t||{};var i=this._userProperty||"user",n=t.session===void 0?!0:t.session;if(this[i]=e,n&&this._sessionManager){if(typeof r!="function")throw new Error("req#login requires a callback function");var a=this;this._sessionManager.logIn(this,e,t,function(s){if(s)return a[i]=null,r(s);r()})}else r&&r()};Fa.logout=Fa.logOut=function(e,t){typeof e=="function"&&(t=e,e={}),e=e||{};var r=this._userProperty||"user";if(this[r]=null,this._sessionManager){if(typeof t!="function")throw new Error("req#logout requires a callback function");this._sessionManager.logOut(this,e,t)}else t&&t()};Fa.isAuthenticated=function(){var e=this._userProperty||"user";return!!this[e]};Fa.isUnauthenticated=function(){return!this.isAuthenticated()}});var $6=f((ofe,J6)=>{var Ll=hb();J6.exports=function(t,r){return r=r||{},function(n,a,s){n.login=n.logIn=n.logIn||Ll.logIn,n.logout=n.logOut=n.logOut||Ll.logOut,n.isAuthenticated=n.isAuthenticated||Ll.isAuthenticated,n.isUnauthenticated=n.isUnauthenticated||Ll.isUnauthenticated,n._sessionManager=t._sm,r.userProperty&&(n._userProperty=r.userProperty);var o=r.compat===void 0?!0:r.compat;o&&(t._userProperty=r.userProperty||"user",n._passport={},n._passport.instance=t),s()}}});var H6=f((cfe,U6)=>{function F6(e,t){Error.call(this),Error.captureStackTrace(this,arguments.callee),this.name="AuthenticationError",this.message=e,this.status=t||401}F6.prototype.__proto__=Error.prototype;U6.exports=F6});var G6=f((ufe,V6)=>{var Q6=require("http"),Jl=hb(),kG=H6();V6.exports=function(t,r,i,n){typeof i=="function"&&(n=i,i={}),i=i||{};var a=!0;return Array.isArray(r)||(r=[r],a=!1),function(o,c,u){o.login=o.logIn=o.logIn||Jl.logIn,o.logout=o.logOut=o.logOut||Jl.logOut,o.isAuthenticated=o.isAuthenticated||Jl.isAuthenticated,o.isUnauthenticated=o.isUnauthenticated||Jl.isUnauthenticated,o._sessionManager=t._sm;var l=[];function p(){if(n)if(a){var d=l.map(function(P){return P.challenge}),g=l.map(function(P){return P.status});return n(null,!1,d,g)}else return n(null,!1,l[0].challenge,l[0].status);var m=l[0]||{},h=m.challenge||{},y;if(i.failureFlash){var b=i.failureFlash;typeof b=="string"&&(b={type:"error",message:b}),b.type=b.type||"error";var w=b.type||h.type||"error";y=b.message||h.message||h,typeof y=="string"&&o.flash(w,y)}if(i.failureMessage&&(y=i.failureMessage,typeof y=="boolean"&&(y=h.message||h),typeof y=="string"&&(o.session.messages=o.session.messages||[],o.session.messages.push(y))),i.failureRedirect)return c.redirect(i.failureRedirect);for(var O=[],E,j,z=0,C=l.length;z<C;z++)m=l[z],h=m.challenge,j=m.status,E=E||j,typeof h=="string"&&O.push(h);if(c.statusCode=E||401,c.statusCode==401&&O.length&&c.setHeader("WWW-Authenticate",O),i.failWithError)return u(new kG(Q6.STATUS_CODES[c.statusCode],E));c.end(Q6.STATUS_CODES[c.statusCode])}(function d(g){var m=r[g];if(!m)return p();var h,y;if(typeof m.authenticate=="function")h=m;else{if(y=t._strategy(m),!y)return u(new Error('Unknown authentication strategy "'+m+'"'));h=Object.create(y)}h.success=function(b,w){if(n)return n(null,b,w);w=w||{};var O;if(i.successFlash){var E=i.successFlash;typeof E=="string"&&(E={type:"success",message:E}),E.type=E.type||"success";var j=E.type||w.type||"success";O=E.message||w.message||w,typeof O=="string"&&o.flash(j,O)}if(i.successMessage&&(O=i.successMessage,typeof O=="boolean"&&(O=w.message||w),typeof O=="string"&&(o.session.messages=o.session.messages||[],o.session.messages.push(O))),i.assignProperty){o[i.assignProperty]=b,i.authInfo!==!1?t.transformAuthInfo(w,o,function(z,C){if(z)return u(z);o.authInfo=C,u()}):u();return}o.logIn(b,i,function(z){if(z)return u(z);function C(){if(i.successReturnToOrRedirect){var P=i.successReturnToOrRedirect;return o.session&&o.session.returnTo&&(P=o.session.returnTo,delete o.session.returnTo),c.redirect(P)}if(i.successRedirect)return c.redirect(i.successRedirect);u()}i.authInfo!==!1?t.transformAuthInfo(w,o,function(P,L){if(P)return u(P);o.authInfo=L,C()}):C()})},h.fail=function(b,w){typeof b=="number"&&(w=b,b=void 0),l.push({challenge:b,status:w}),d(g+1)},h.redirect=function(b,w){c.statusCode=w||302,c.setHeader("Location",b),c.setHeader("Content-Length","0"),c.end()},h.pass=function(){u()},h.error=function(b){if(n)return n(b);u(b)},h.authenticate(o,i)})(0)}}});var Z6=f((K6,W6)=>{var EG=$6(),CG=G6();K6=W6.exports=function(){return{initialize:EG,authenticate:CG}}});var Y6=f((lfe,X6)=>{var TG=fb(),PG=D6();function Ht(){this._key="passport",this._strategies={},this._serializers=[],this._deserializers=[],this._infoTransformers=[],this._framework=null,this.init()}Ht.prototype.init=function(){this.framework(Z6()()),this.use(new TG({key:this._key},this.deserializeUser.bind(this))),this._sm=new PG({key:this._key},this.serializeUser.bind(this))};Ht.prototype.use=function(e,t){if(t||(t=e,e=t.name),!e)throw new Error("Authentication strategies must have a name");return this._strategies[e]=t,this};Ht.prototype.unuse=function(e){return delete this._strategies[e],this};Ht.prototype.framework=function(e){return this._framework=e,this};Ht.prototype.initialize=function(e){return e=e||{},this._framework.initialize(this,e)};Ht.prototype.authenticate=function(e,t,r){return this._framework.authenticate(this,e,t,r)};Ht.prototype.authorize=function(e,t,r){t=t||{},t.assignProperty="account";var i=this._framework.authorize||this._framework.authenticate;return i(this,e,t,r)};Ht.prototype.session=function(e){return this.authenticate("session",e)};Ht.prototype.serializeUser=function(e,t,r){if(typeof e=="function")return this._serializers.push(e);var i=e;typeof t=="function"&&(r=t,t=void 0);var n=this._serializers;(function a(s,o,c){if(o==="pass"&&(o=void 0),o||c||c===0)return r(o,c);var u=n[s];if(!u)return r(new Error("Failed to serialize user into session"));function l(d,g){a(s+1,d,g)}try{var p=u.length;p==3?u(t,i,l):u(i,l)}catch(d){return r(d)}})(0)};Ht.prototype.deserializeUser=function(e,t,r){if(typeof e=="function")return this._deserializers.push(e);var i=e;typeof t=="function"&&(r=t,t=void 0);var n=this._deserializers;(function a(s,o,c){if(o==="pass"&&(o=void 0),o||c)return r(o,c);if(c===null||c===!1)return r(null,!1);var u=n[s];if(!u)return r(new Error("Failed to deserialize user out of session"));function l(d,g){a(s+1,d,g)}try{var p=u.length;p==3?u(t,i,l):u(i,l)}catch(d){return r(d)}})(0)};Ht.prototype.transformAuthInfo=function(e,t,r){if(typeof e=="function")return this._infoTransformers.push(e);var i=e;typeof t=="function"&&(r=t,t=void 0);var n=this._infoTransformers;(function a(s,o,c){if(o==="pass"&&(o=void 0),o||c)return r(o,c);var u=n[s];if(!u)return r(null,i);function l(g,m){a(s+1,g,m)}try{var p=u.length;if(p==1){var d=u(i);l(null,d)}else p==3?u(t,i,l):u(i,l)}catch(g){return r(g)}})(0)};Ht.prototype._strategy=function(e){return this._strategies[e]};X6.exports=Ht});var rP=f((yn,tP)=>{var eP=Y6(),AG=fb();yn=tP.exports=new eP;yn.Passport=yn.Authenticator=eP;yn.Strategy=pb();yn.strategies={};yn.strategies.SessionStrategy=AG});var vb=f(gb=>{"use strict";gb.parse=RG;gb.serialize=DG;var qG=Object.prototype.toString,IG=Object.prototype.hasOwnProperty,jG=/^[!#$%&'*+\-.^_`|~0-9A-Za-z]+$/,zG=/^("?)[\u0021\u0023-\u002B\u002D-\u003A\u003C-\u005B\u005D-\u007E]*\1$/,NG=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,MG=/^[\u0020-\u003A\u003D-\u007E]*$/;function RG(e,t){if(typeof e!="string")throw new TypeError("argument str must be a string");var r={},i=e.length;if(i<2)return r;var n=t&&t.decode||BG,a=0,s=0,o=0;do{if(s=e.indexOf("=",a),s===-1)break;if(o=e.indexOf(";",a),o===-1)o=i;else if(s>o){a=e.lastIndexOf(";",s-1)+1;continue}var c=iP(e,a,s),u=nP(e,s,c),l=e.slice(c,u);if(!IG.call(r,l)){var p=iP(e,s+1,o),d=nP(e,o,p);e.charCodeAt(p)===34&&e.charCodeAt(d-1)===34&&(p++,d--);var g=e.slice(p,d);r[l]=JG(g,n)}a=o+1}while(a<i);return r}function iP(e,t,r){do{var i=e.charCodeAt(t);if(i!==32&&i!==9)return t}while(++t<r);return r}function nP(e,t,r){for(;t>r;){var i=e.charCodeAt(--t);if(i!==32&&i!==9)return t+1}return r}function DG(e,t,r){var i=r&&r.encode||encodeURIComponent;if(typeof i!="function")throw new TypeError("option encode is invalid");if(!jG.test(e))throw new TypeError("argument name is invalid");var n=i(t);if(!zG.test(n))throw new TypeError("argument val is invalid");var a=e+"="+n;if(!r)return a;if(r.maxAge!=null){var s=Math.floor(r.maxAge);if(!isFinite(s))throw new TypeError("option maxAge is invalid");a+="; Max-Age="+s}if(r.domain){if(!NG.test(r.domain))throw new TypeError("option domain is invalid");a+="; Domain="+r.domain}if(r.path){if(!MG.test(r.path))throw new TypeError("option path is invalid");a+="; Path="+r.path}if(r.expires){var o=r.expires;if(!LG(o)||isNaN(o.valueOf()))throw new TypeError("option expires is invalid");a+="; Expires="+o.toUTCString()}if(r.httpOnly&&(a+="; HttpOnly"),r.secure&&(a+="; Secure"),r.partitioned&&(a+="; Partitioned"),r.priority){var c=typeof r.priority=="string"?r.priority.toLowerCase():r.priority;switch(c){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError("option priority is invalid")}}if(r.sameSite){var u=typeof r.sameSite=="string"?r.sameSite.toLowerCase():r.sameSite;switch(u){case!0:a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"strict":a+="; SameSite=Strict";break;case"none":a+="; SameSite=None";break;default:throw new TypeError("option sameSite is invalid")}}return a}function BG(e){return e.indexOf("%")!==-1?decodeURIComponent(e):e}function LG(e){return qG.call(e)==="[object Date]"}function JG(e,t){try{return t(e)}catch{return e}}});var sP=f((dfe,aP)=>{var Uo=1e3,Ho=Uo*60,Qo=Ho*60,Vo=Qo*24,$G=Vo*365.25;aP.exports=function(e,t){t=t||{};var r=typeof e;if(r==="string"&&e.length>0)return FG(e);if(r==="number"&&isNaN(e)===!1)return t.long?HG(e):UG(e);throw new Error("val is not a non-empty string or a valid number. val="+JSON.stringify(e))};function FG(e){if(e=String(e),!(e.length>100)){var t=/^((?:\d+)?\.?\d+) *(milliseconds?|msecs?|ms|seconds?|secs?|s|minutes?|mins?|m|hours?|hrs?|h|days?|d|years?|yrs?|y)?$/i.exec(e);if(t){var r=parseFloat(t[1]),i=(t[2]||"ms").toLowerCase();switch(i){case"years":case"year":case"yrs":case"yr":case"y":return r*$G;case"days":case"day":case"d":return r*Vo;case"hours":case"hour":case"hrs":case"hr":case"h":return r*Qo;case"minutes":case"minute":case"mins":case"min":case"m":return r*Ho;case"seconds":case"second":case"secs":case"sec":case"s":return r*Uo;case"milliseconds":case"millisecond":case"msecs":case"msec":case"ms":return r;default:return}}}}function UG(e){return e>=Vo?Math.round(e/Vo)+"d":e>=Qo?Math.round(e/Qo)+"h":e>=Ho?Math.round(e/Ho)+"m":e>=Uo?Math.round(e/Uo)+"s":e+"ms"}function HG(e){return $l(e,Vo,"day")||$l(e,Qo,"hour")||$l(e,Ho,"minute")||$l(e,Uo,"second")||e+" ms"}function $l(e,t,r){if(!(e<t))return e<t*1.5?Math.floor(e/t)+" "+r:Math.ceil(e/t)+" "+r+"s"}});var bb=f((de,oP)=>{de=oP.exports=yb.debug=yb.default=yb;de.coerce=WG;de.disable=GG;de.enable=VG;de.enabled=KG;de.humanize=sP();de.names=[];de.skips=[];de.formatters={};var xb;function QG(e){var t=0,r;for(r in e)t=(t<<5)-t+e.charCodeAt(r),t|=0;return de.colors[Math.abs(t)%de.colors.length]}function yb(e){function t(){if(t.enabled){var r=t,i=+new Date,n=i-(xb||i);r.diff=n,r.prev=xb,r.curr=i,xb=i;for(var a=new Array(arguments.length),s=0;s<a.length;s++)a[s]=arguments[s];a[0]=de.coerce(a[0]),typeof a[0]!="string"&&a.unshift("%O");var o=0;a[0]=a[0].replace(/%([a-zA-Z%])/g,function(u,l){if(u==="%%")return u;o++;var p=de.formatters[l];if(typeof p=="function"){var d=a[o];u=p.call(r,d),a.splice(o,1),o--}return u}),de.formatArgs.call(r,a);var c=t.log||de.log||console.log.bind(console);c.apply(r,a)}}return t.namespace=e,t.enabled=de.enabled(e),t.useColors=de.useColors(),t.color=QG(e),typeof de.init=="function"&&de.init(t),t}function VG(e){de.save(e),de.names=[],de.skips=[];for(var t=(typeof e=="string"?e:"").split(/[\s,]+/),r=t.length,i=0;i<r;i++)t[i]&&(e=t[i].replace(/\*/g,".*?"),e[0]==="-"?de.skips.push(new RegExp("^"+e.substr(1)+"$")):de.names.push(new RegExp("^"+e+"$")))}function GG(){de.enable("")}function KG(e){var t,r;for(t=0,r=de.skips.length;t<r;t++)if(de.skips[t].test(e))return!1;for(t=0,r=de.names.length;t<r;t++)if(de.names[t].test(e))return!0;return!1}function WG(e){return e instanceof Error?e.stack||e.message:e}});var lP=f((bt,uP)=>{bt=uP.exports=bb();bt.log=YG;bt.formatArgs=XG;bt.save=eK;bt.load=cP;bt.useColors=ZG;bt.storage=typeof chrome<"u"&&typeof chrome.storage<"u"?chrome.storage.local:tK();bt.colors=["lightseagreen","forestgreen","goldenrod","dodgerblue","darkorchid","crimson"];function ZG(){return typeof window<"u"&&window.process&&window.process.type==="renderer"?!0:typeof document<"u"&&document.documentElement&&document.documentElement.style&&document.documentElement.style.WebkitAppearance||typeof window<"u"&&window.console&&(window.console.firebug||window.console.exception&&window.console.table)||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/firefox\/(\d+)/)&&parseInt(RegExp.$1,10)>=31||typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().match(/applewebkit\/(\d+)/)}bt.formatters.j=function(e){try{return JSON.stringify(e)}catch(t){return"[UnexpectedJSONParseError]: "+t.message}};function XG(e){var t=this.useColors;if(e[0]=(t?"%c":"")+this.namespace+(t?" %c":" ")+e[0]+(t?"%c ":" ")+"+"+bt.humanize(this.diff),!!t){var r="color: "+this.color;e.splice(1,0,r,"color: inherit");var i=0,n=0;e[0].replace(/%[a-zA-Z%]/g,function(a){a!=="%%"&&(i++,a==="%c"&&(n=i))}),e.splice(n,0,r)}}function YG(){return typeof console=="object"&&console.log&&Function.prototype.apply.call(console.log,console,arguments)}function eK(e){try{e==null?bt.storage.removeItem("debug"):bt.storage.debug=e}catch{}}function cP(){var e;try{e=bt.storage.debug}catch{}return!e&&typeof process<"u"&&"env"in process&&(e=process.env.DEBUG),e}bt.enable(cP());function tK(){try{return window.localStorage}catch{}}});var mP=f((it,fP)=>{var pP=require("tty"),Go=require("util");it=fP.exports=bb();it.init=cK;it.log=aK;it.formatArgs=nK;it.save=sK;it.load=dP;it.useColors=iK;it.colors=[6,2,3,4,5,1];it.inspectOpts=Object.keys(process.env).filter(function(e){return/^debug_/i.test(e)}).reduce(function(e,t){var r=t.substring(6).toLowerCase().replace(/_([a-z])/g,function(n,a){return a.toUpperCase()}),i=process.env[t];return/^(yes|on|true|enabled)$/i.test(i)?i=!0:/^(no|off|false|disabled)$/i.test(i)?i=!1:i==="null"?i=null:i=Number(i),e[r]=i,e},{});var Ua=parseInt(process.env.DEBUG_FD,10)||2;Ua!==1&&Ua!==2&&Go.deprecate(function(){},"except for stderr(2) and stdout(1), any other usage of DEBUG_FD is deprecated. Override debug.log if you want to use a different log function (https://git.io/debug_fd)")();var rK=Ua===1?process.stdout:Ua===2?process.stderr:oK(Ua);function iK(){return"colors"in it.inspectOpts?!!it.inspectOpts.colors:pP.isatty(Ua)}it.formatters.o=function(e){return this.inspectOpts.colors=this.useColors,Go.inspect(e,this.inspectOpts).split(`
                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                                            

Error: DATABASE_URL must be set. Did you forget to provision a database?
    at /Users/aruntharakan/Documents/Coding Practices/BOOK MY SLOT/BOOK-MY-SLOT/17-JAN-2025/Slot-Notifier/dist/index.cjs:70:31565
    at /Users/aruntharakan/Documents/Coding Practices/BOOK MY SLOT/BOOK-MY-SLOT/17-JAN-2025/Slot-Notifier/dist/index.cjs:1:225
    at /Users/aruntharakan/Documents/Coding Practices/BOOK MY SLOT/BOOK-MY-SLOT/17-JAN-2025/Slot-Notifier/dist/index.cjs:70:32424
    at /Users/aruntharakan/Documents/Coding Practices/BOOK MY SLOT/BOOK-MY-SLOT/17-JAN-2025/Slot-Notifier/dist/index.cjs:1:225
    at Object.<anonymous> (/Users/aruntharakan/Documents/Coding Practices/BOOK MY SLOT/BOOK-MY-SLOT/17-JAN-2025/Slot-Notifier/dist/index.cjs:77:155309)
    at Module._compile (node:internal/modules/cjs/loader:1529:14)
    at Module._extensions..js (node:internal/modules/cjs/loader:1613:10)
    at Module.load (node:internal/modules/cjs/loader:1275:32)
    at Module._load (node:internal/modules/cjs/loader:1096:12)
    at Function.executeUserEntryPoint [as runMain] (node:internal/modules/run_main:164:12)

Node.js v20.19.4